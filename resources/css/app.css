@tailwind base;
@tailwind components;
@tailwind utilities;

/* Hide elements with x-cloak until Alpine.js is ready */
[x-cloak] {
    display: none !important;
}

/* Ensure notification modal is always on top and not constrained by parent */
.notification-modal {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    z-index: 99999 !important;
    margin: 0 !important;
    padding: 0 !important;
    transform: none !important;
    will-change: auto !important;
}

/* Ensure parent containers don't create new stacking context */
.bg-gradient-sidebar {
    transform: none !important;
    will-change: auto !important;
}

/* Performance optimizations */
@layer utilities {
    /* GPU acceleration for smooth transitions */
    .gpu-accelerated {
        transform: translateZ(0);
        will-change: transform;
    }
    
    /* Optimize repaints and reflows */
    .optimize-rendering {
        contain: layout style paint;
    }
    
    /* Smooth scrolling with hardware acceleration */
    .smooth-scroll {
        scroll-behavior: smooth;
        -webkit-overflow-scrolling: touch;
    }
}

/* CSS Compatibility Fixes */
@layer base {
    html,
    :host {
        -webkit-text-size-adjust: 100%;
        text-size-adjust: 100%;
    }
}

/* Backdrop filter support for Safari */
@layer utilities {
    .backdrop-blur-sm,
    .backdrop-blur,
    .backdrop-blur-md,
    .backdrop-blur-lg {
        -webkit-backdrop-filter: var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);
        backdrop-filter: var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);
    }
    
    /* Width stretch support for Edge */
    .w-stretch {
        width: -webkit-fill-available;
        width: stretch;
    }
}

/* Custom utility classes to replace inline styles */
@layer utilities {
    .z-sidebar {
        z-index: 10;
    }
    
    .z-content {
        z-index: 0;
    }
    
    .z-profile-dropdown {
        z-index: 1;
    }
    
    .bg-header-light {
        background-color: #F8FAFC;
    }
    
    .bg-status-blue {
        background-color: #E0E7FF;
    }
    
    .text-status-blue {
        color: #3B82F6;
    }
    
    .bg-table-header {
        background-color: #253B7E;
    }
    
    .text-table-header {
        color: #E0E7FF;
    }
    
    /* Additional utility classes for inline style replacement */
    .display-none {
        display: none;
    }
    
    .pointer-events-auto {
        pointer-events: auto;
    }
    
    .position-relative {
        position: relative;
    }
    
    .display-block {
        display: block;
    }
    
    .width-full {
        width: 100%;
    }
    
    .height-200 {
        height: 200px;
    }
    
    .height-300 {
        height: 300px;
    }
    
    .touch-action-none {
        touch-action: none;
    }
}

/* Loading Overlay Animation */
@layer components {
    #page-loading-overlay {
        backdrop-filter: blur(2px);
        -webkit-backdrop-filter: blur(2px);
        transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
    }
    
    #page-loading-overlay.opacity-0 {
        visibility: hidden;
    }
    
    #page-loading-overlay.opacity-100 {
        visibility: visible;
    }
    
    /* Smooth spinner animation */
    @keyframes spin {
        from {
            transform: rotate(0deg);
        }
        to {
            transform: rotate(360deg);
        }
    }
    
    #page-loading-overlay .animate-spin {
        animation: spin 1s linear infinite;
    }
}
